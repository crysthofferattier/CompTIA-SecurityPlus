# 0x08 - Prepare for Penetration Test Engagement

After scoping the penetration testing and planning the engagement with the client, there are various activities that need to be performed. These activities are crucial to streamline the overall penetration testing project and, therefore, must be planned carefully. Some of the key activities that must be performed before the penetration test are preparing the team, activity assignment, and contingency planning.

## Team Preparation

Preparing the team for penetration testing is a critical task. The correct skill set must be selected for the penetration test. For example, in a live penetration testing for a large client, you would not want to get a fresher involved in penetration testing. It would be ideal to have a more experienced team member front-end the entire project. There are certain key pointers that must be followed when preparing the team for penetration testing:

The team must be clear of the scope of penetration testing. The team members must ensure that they know in-scope and out of scope activities. If there are certain limitations that the client has made you aware of, then the team members must be informed of them.
* Each team member must be clear with the end objective of penetration testing. Each one of them should know what they need to achieve, and every team member should have a common goal to achieve the end objective.
* The end objective, at the end of the penetration testing, must be achieved and translated into the actionable report.
* Ensure the team documents all actions and outcomes. The documents must be available in a central repository and must be accessible to the team members.
* The escalation path must be clear and known to the team members.
* The team must have authorization for the penetration test.
* The immediate supervisor’s contact information must be available with each one of the team members. A team member should be able to reach out to the other team members in case of any trouble.
* The team must be capable of restoring the original environment in case anything goes wrong during penetration testing. The team lead or supervisor must be made aware of anything that goes wrong.
Similar to preparing the team for penetration testing, the client must also be prepared for this task. There are certain guidelines that you should adhere to when preparing the client for this task:
* You must have the technical contact point of information from the client side. This information must be available throughout the lifecycle of penetration testing.
* You must ensure that the client has appraised the internal IT and Security teams about penetration testing.
* You must inform the client to take the necessary backups of the critical systems. In case any system fails during the penetration testing, the client must have the required backups to restore the system at the earliest.
* You need to ensure that the client does not make security control changes just before the penetration testing. If this happens, then you will not be able to provide a true picture of their environment. The idea is to test the current IT environment in the as-is state.

## Data Collection and Documentation

Data collection and documentation is a critical task in penetration testing. There are some guidelines that one must follow:

* Every activity and its outcome must be documented.
* The documentation must be stored in a central repository with access to all team members.
* The penetration tests must be aligned to the defined objectives, and each test must meet the client requirements.
* Each piece of documentation must be written in a clear and concise manner.
* Each and every step to perform a task must be captured properly. This is critical because if the results or outcomes need to be reproduced, you should be able to do it with the steps.
* Only focus on documenting the in-scope activities. Anything that is out of scope must be escalated to the authorized person in the penetration testing team. However, you must not capture any steps or outcome of the out of scope activity.
* You should focus on capturing every detail in a test. More information captured in a test is likely to give insights.
* You should ensure that the original test data and documents are preserved securely.

## Activity Assignment and Sequencing

Penetration testing is performed in a series of steps, which must be followed in a sequence. The typical sequence of steps are as follows:

    1. Passive reconnaissance
    2. Active reconnaissance
    3. Vulnerability assessment
    4. Penetration testing
    5. Exploitation
    6. Post exploitation

Some of these steps will require more time than others. For example, social engineering is dependent on users who have to fall prey. A user may respond quickly or may not respond at all. The results will vary depending on the user’s response.

You should also perform the non-technical tests in the initial phases of penetration testing. These can be time-consuming, and therefore, it is better to conclude them at the early stage.

## Contingency Planning

Penetration testing can be unpredictable. Therefore, you must carefully plan the penetration testing. In the scope, the target systems must be identified. 

However, there can be a rippling effect on a system that was not in the scope, and therefore, the client must be prepared with the latest backups of all critical systems. Restoring the system can be:

* Simple enough as restarting a service or rebooting the system
* Tedious enough to restore the entire system using a snapshot or the entire backup

In either of the situation, the client must be prepared for contingency planning.

## Escalation Paths and Communications

Just like any project, escalation paths are necessary for a penetration testing project. The client and the penetration testing team must have the escalation path defined and shared with the other party.

There must be a designated individual in the penetration testing team who is authorized to make a decision. The client must communicate with the designated individual only. This also helps the team members of the penetration testing team not to make their own critical decisions. In case of an emergency, such as a system crashing during the penetration testing, the penetration testing team must inform the designated individual who, in turn, informs the client.

Only the authorized single-point-of-contacts (SPOCs) from both sides should communicate with each other and escalate things as necessary. The client SPOC should establish a process of communicating with the relevant stakeholders as the penetration testing starts and progresses.

On the other hand, the SPOC from the penetration testing team must ensure that there is regular communication amongst the team members, and each one of them regularly informs the SPOC about the task progress.

## Starting the Penetration Test

After all the necessary arrangements have been made, the scope has been defined, and the team has been prepared, it is time to go live with the penetration testing.

You can choose to inform the date and time to the client or choose to start in the stealth mode so that you can get the actual results as an attacker would have gotten.

Even though there are steps to be followed after starting the penetration testing, you can choose to perform certain tasks, such as passive reconnaissance and information gathering before you go live.
